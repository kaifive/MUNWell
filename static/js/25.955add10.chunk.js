(this.webpackJsonpmunwell=this.webpackJsonpmunwell||[]).push([[25],{641:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a(121),s=a(519),r=a(632),l=a(532);function o(e){let t,a=0;for(t=0;t<e.length;t++)"Independent"!==e[t].type&&(a+=1);return a}function c(e){let t,a=0;for(t=0;t<e.length;t++)a+=Number(e[t].delegates);return a}function d(e,t){if(void 0!==t){let a,i=0;for(a=0;a<e.length;a++){let n=0,s=0;"Early"===e[a].window?(n=Number(t.earlydelfee),s=Number(t.earlyschoolfee)):"Regular"===e[a].window?(n=Number(t.regdelfee),s=Number(t.regschoolfee)):"Late"===e[a].window&&(n=Number(t.latedelfee),s=Number(t.lateschoolfee)),i+=Number(e[a].delegates)*n,"Delegation"===e[a].type&&(i+=s)}return i=i.toFixed(2),i}return 0}function g(e){let t,a=[];for(t=0;t<e.length;t++)""===e[t].abbreviation?a[t]=e[t].committee:a[t]=e[t].abbreviation;return a}function b(e,t){let a,i=[];for(a=0;a<t.length;a++){let n;"total"===e?n=t[a].positions.split(","):"assigned"===e&&(n=t[a].assignments.split(","));let s,r=0;for(s=0;s<n.length;s++)""!==n[s]&&(r+=1);i[a]=r}return i}function m(e){let t=b("assigned",e).reduce((function(e,t){return e+t}),0),a=b("total",e).reduce((function(e,t){return e+t}),0);return isNaN(Math.round(t/a*100))?0:Math.round(t/a*100)}function j(e){let t,a=0;for(t=0;t<e.length;t++)"Paid"===e[t].status&&(a+=1);return isNaN(Math.round(a/e.length*100))?0:Math.round(a/e.length*100)}function h(e,t,a){let i,n=0;for(i=0;i<e.length;i++){let s,r,l=0,o=0;for(s=0;s<t.length;s++){let a,n=t[s].assignments.split(",");for(a=0;a<n.length;a++)n[a]===e[i].delegation&&(l+=1)}for(r=0;r<a.length;r++)if(a[r].delegationId===e[i]._id){let e,t=a[r].allotments.split(",");for(e=0;e<t.length;e++){let a=t[e].split(":");void 0!==a[1]&&(o+=Number(a[1]))}}l-o===0&&(n+=1)}return isNaN(Math.round(n/e.length*100))?0:Math.round(n/e.length*100)}function u(e,t){let a,i=0;for(a=0;a<t.length;a++)t[a].category===e&&(i+=1);return i}function f(e,t){let a,i=0;for(a=0;a<t.length;a++)t[a].window===e&&(i+=1);return i}function O(e,t){let a,i=0;for(a=0;a<t.length;a++)if(t[a].category===e){let e,n=t[a].assignments.split(",");for(e=0;e<n.length;e++)""!==n[e]&&(i+=1)}return i}function p(e,t,a){let i,n=0;for(i=0;i<t.length;i++){let s,r=t[i].assignments.split(",");for(s=0;s<r.length;s++){let t;for(t=0;t<a.length;t++)a[t].delegation===r[s]&&a[t].type===e&&(n+=1)}}return n}var x=a(524),D=a(3);t.default=()=>{const{user:e}=Object(n.b)(),{isAuthenticated:t}=Object(n.b)(),[a,y]=Object(i.useState)({committeeData:[],registrationData:[],settings:[],allotmentData:[]}),[N,w]=Object(i.useState)(!0);return t&&async function(){await Object(x.a)("/api/get/committee",e.sub).then((e=>{JSON.stringify(e)!==JSON.stringify(a.committeeData)&&y((t=>({...t,committeeData:e})))})),await Object(x.a)("/api/get/registrationData",e.sub).then((e=>{JSON.stringify(e)!==JSON.stringify(a.registrationData)&&y((t=>({...t,registrationData:e})))})),await Object(x.a)("/api/get/settings",e.sub).then((e=>{JSON.stringify(e[e.length-1])!==JSON.stringify(a.settings)&&y((t=>({...t,settings:e[e.length-1]})))})),await Object(x.a)("/api/get/allotments",e.sub,"delegation").then((e=>{JSON.stringify(e)!==JSON.stringify(a.allotmentData)&&y((t=>({...t,allotmentData:e})))}))}().then((()=>{N&&w(!1)})),N?Object(D.jsx)("p",{children:"Waiting for Data..."}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(s.S,{children:[Object(D.jsx)(s.l,{xs:"12",sm:"6",lg:"3",children:Object(D.jsx)(s.eb,{text:"committees",header:""+a.committeeData.length,color:"primary",iconPadding:!1,children:Object(D.jsx)(l.a,{width:24,name:"cil-people"})})}),Object(D.jsx)(s.l,{xs:"12",sm:"6",lg:"3",children:Object(D.jsx)(s.eb,{text:"delegations",header:""+o(a.registrationData),color:"primary",iconPadding:!1,children:Object(D.jsx)(l.a,{width:24,name:"cil-people"})})}),Object(D.jsx)(s.l,{xs:"12",sm:"6",lg:"3",children:Object(D.jsx)(s.eb,{text:"delegates",header:""+c(a.registrationData),color:"primary",iconPadding:!1,children:Object(D.jsx)(l.a,{width:24,name:"cil-user"})})}),Object(D.jsx)(s.l,{xs:"12",sm:"6",lg:"3",children:Object(D.jsx)(s.eb,{text:"income",header:"$"+d(a.registrationData,a.settings),color:"primary",iconPadding:!1,children:Object(D.jsx)(l.a,{width:24,name:"cil-dollar"})})})]}),Object(D.jsx)(s.j,{children:Object(D.jsxs)(s.g,{children:[Object(D.jsx)(s.k,{children:"Committee Capacity"}),Object(D.jsx)(s.h,{children:Object(D.jsx)(r.a,{datasets:[{label:"Assigned Delegates",backgroundColor:"#321fdb",data:b("assigned",a.committeeData)},{label:"Total Positions",backgroundColor:"#ced2d8",data:b("total",a.committeeData)}],labels:g(a.committeeData),options:{tooltips:{enabled:!0},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})})]})}),Object(D.jsx)("br",{}),Object(D.jsxs)(s.S,{children:[Object(D.jsx)(s.l,{xs:"12",sm:"6",lg:"4",children:Object(D.jsx)(s.fb,{inverse:!0,color:"primary",variant:"inverse",value:m(a.committeeData),header:m(a.committeeData)+"% Conference Capacity",footer:"Assigned Positions / Total Positions"})}),Object(D.jsx)(s.l,{xs:"12",sm:"6",lg:"4",children:Object(D.jsx)(s.fb,{inverse:!0,color:"primary",variant:"inverse",value:j(a.registrationData),header:j(a.registrationData)+"% Payment Completion",footer:"Payments Recieved / Payments Expected"})}),Object(D.jsx)(s.l,{xs:"12",sm:"6",lg:"4",children:Object(D.jsx)(s.fb,{inverse:!0,color:"primary",variant:"inverse",value:h(a.registrationData,a.committeeData,a.allotmentData),header:h(a.registrationData,a.committeeData,a.allotmentData)+"% Delegation Balance",footer:"Balanced Delegations / Total Delegations"})})]}),Object(D.jsxs)(s.j,{columns:!0,className:"cols-2",children:[Object(D.jsxs)(s.g,{children:[Object(D.jsx)(s.k,{children:"Committee Spread"}),Object(D.jsx)(s.h,{children:Object(D.jsx)(r.b,{datasets:[{backgroundColor:["#03254c","#1167b1","#2a9df4","#d0efff"],data:[u("General Assembly",a.committeeData),u("Specialized Agency",a.committeeData),u("Crisis Committee",a.committeeData),u("Other",a.committeeData)]}],labels:["General Assemblies","Specialized Agencies","Crisis Committees","Other"],options:{tooltips:{enabled:!0},legend:{position:"right"}}})})]}),Object(D.jsxs)(s.g,{children:[Object(D.jsx)(s.k,{children:"Registration Time Window Spread"}),Object(D.jsx)(s.h,{children:Object(D.jsx)(r.b,{datasets:[{backgroundColor:["#03254c","#1167b1","#2a9df4"],data:[f("Early",a.registrationData),f("Regular",a.registrationData),f("Late",a.registrationData)]}],labels:["Early Registration","Regular Registration","Late Registration"],options:{tooltips:{enabled:!0},legend:{position:"right"}}})})]})]}),Object(D.jsxs)(s.j,{columns:!0,className:"cols-2",children:[Object(D.jsxs)(s.g,{children:[Object(D.jsx)(s.k,{children:"Delegate Distribution by Committee Type"}),Object(D.jsx)(s.h,{children:Object(D.jsx)(r.b,{datasets:[{backgroundColor:["#03254c","#1167b1","#2a9df4","#d0efff"],data:[O("General Assembly",a.committeeData),O("Specialized Agency",a.committeeData),O("Crisis Committee",a.committeeData),O("Other",a.committeeData)]}],labels:["General Assemblies","Specialized Agencies","Crisis Committees","Other"],options:{tooltips:{enabled:!0},legend:{position:"right"}}})})]}),Object(D.jsxs)(s.g,{children:[Object(D.jsx)(s.k,{children:"Delegate Distribution by Delegation Type"}),Object(D.jsx)(s.h,{children:Object(D.jsx)(r.b,{datasets:[{backgroundColor:["#03254c","#1167b1"],data:[p("Delegation",a.committeeData,a.registrationData),p("Independent",a.committeeData,a.registrationData)]}],labels:["Delegation","Independent"],options:{tooltips:{enabled:!0},legend:{position:"right"}}})})]})]})]})}}}]);
//# sourceMappingURL=25.955add10.chunk.js.map
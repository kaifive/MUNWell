(this.webpackJsonpmunwell=this.webpackJsonpmunwell||[]).push([[13],{520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=t.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},o=t.isJsons=function(e){return Array.isArray(e)&&e.every((function(e){return"object"===("undefined"===typeof e?"undefined":r(e))&&!(e instanceof Array)}))},c=t.isArrays=function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))},l=t.jsonsHeaders=function(e){return Array.from(e.map((function(e){return Object.keys(e)})).reduce((function(e,t){return new Set([].concat(a(e),a(t)))}),[]))},s=t.jsons2arrays=function(e,t){var n=t=t||l(e),r=t;o(t)&&(n=t.map((function(e){return e.label})),r=t.map((function(e){return e.key})));var i=e.map((function(e){return r.map((function(t){return d(t,e)}))}));return[n].concat(a(i))},d=t.getHeaderValue=function(e,t){var n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,t,n,r){var a=e[t];if(void 0!==a&&null!==a)return a;r.splice(1)}),t);return void 0===n?e in t?t[e]:"":n},u=t.elementOrEmpty=function(e){return"undefined"===typeof e||null===e?"":e},f=t.joiner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter((function(e){return e})).map((function(e){return e.map((function(e){return u(e)})).map((function(e){return""+n+e+n})).join(t)})).join("\n")},p=t.arrays2csv=function(e,t,n,r){return f(t?[t].concat(a(e)):e,n,r)},h=t.jsons2csv=function(e,t,n,r){return f(s(e,t),n,r)},b=t.string2csv=function(e,t,n,r){return t?t.join(n)+"\n"+e:e.replace(/"/g,'""')},m=t.toCSV=function(e,t,n,r){if(o(e))return h(e,t,n,r);if(c(e))return p(e,t,n,r);if("string"===typeof e)return b(e,t,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};t.buildURI=function(e,t,n,r,a){var o=m(e,n,r,a),c=i()?"application/csv":"text/csv",l=new Blob([t?"\ufeff":"",o],{type:c}),s="data:"+c+";charset=utf-8,"+(t?"\ufeff":"")+o,d=window.URL||window.webkitURL;return"undefined"===typeof d.createObjectURL?s:d.createObjectURL(l)}},521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropsNotForwarded=t.defaultProps=t.propTypes=void 0;var r,a=n(0),i=((r=a)&&r.__esModule,n(66));t.propTypes={data:(0,i.oneOfType)([i.string,i.array,i.func]).isRequired,headers:i.array,target:i.string,separator:i.string,filename:i.string,uFEFF:i.bool,onClick:i.func,asyncOnClick:i.bool,enclosingCharacter:i.string},t.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},t.PropsNotForwarded=["data","headers"]},523:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(522),a=n.n(r);async function i(e){let t,n=[];try{let r;for(t=await a.a.get("/api/get/license"),r=0;r<t.data.length;r++)t.data[r].user===e&&n.push(t.data[r]);for(r=0;r<n.length;r++)if(o(n[r])){if(n[r].license.includes("Platinum"))return{maxCommittees:1/0,maxDelegations:1/0,maxIndependents:1/0};if(n[r].license.includes("Gold"))return{maxCommittees:10,maxDelegations:15,maxIndependents:50};if(n[r].license.includes("Silver"))return{maxCommittees:5,maxDelegations:5,maxIndependents:30}}}catch(r){throw new Error(r.message)}return 0}function o(e){var t=e.start,n=e.end,r=new Date,a=t.split("/"),i=n.split("/"),o=new Date(a[2],parseInt(a[1])-1,a[0]),c=new Date(i[2],parseInt(i[1])-1,i[0]);return r>o&&r<c}},526:function(e,t,n){e.exports=n(527)},527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CSVLink=t.CSVDownload=void 0;var r=i(n(528)),a=i(n(529));function i(e){return e&&e.__esModule?e:{default:e}}t.CSVDownload=r.default,t.CSVLink=a.default},528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=(r=i)&&r.__esModule?r:{default:r},c=n(520),l=n(521);var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildURI",value:function(){return c.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.headers,r=e.separator,a=e.enclosingCharacter,i=e.uFEFF,o=e.target,c=e.specs,l=e.replace;this.state.page=window.open(this.buildURI(t,i,n,r,a),o,c,l)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),t}(o.default.Component);s.defaultProps=Object.assign(l.defaultProps,{target:"_blank"}),s.propTypes=l.propTypes,t.default=s},529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),c=(r=o)&&r.__esModule?r:{default:r},l=n(520),s=n(521);var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buildURI=n.buildURI.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"buildURI",value:function(){return l.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var n=this.props,r=n.data,a=n.headers,i=n.separator,o=n.filename,c=n.enclosingCharacter,s=n.uFEFF,d=t&&"function"===typeof r?r():r,u=new Blob([s?"\ufeff":"",(0,l.toCSV)(d,a,i,c)]);return window.navigator.msSaveBlob(u,o),!1}}},{key:"handleAsyncClick",value:function(e){var t=this;this.props.onClick(e,(function(n){!1!==n?t.handleLegacy(e,!0):e.preventDefault()}))}},{key:"handleSyncClick",value:function(e){!1===this.props.onClick(e)?e.preventDefault():this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(t){if("function"===typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(t):e.handleSyncClick(t);e.handleLegacy(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.headers,i=t.separator,o=t.filename,l=t.uFEFF,s=t.children,d=(t.onClick,t.asyncOnClick,t.enclosingCharacter),u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),f="undefined"===typeof window?"":this.buildURI(n,l,r,i,d);return c.default.createElement("a",a({download:o},u,{ref:function(t){return e.link=t},target:"_self",href:f,onClick:this.handleClick()}),s)}}]),t}(c.default.Component);d.defaultProps=s.defaultProps,d.propTypes=s.propTypes,t.default=d},530:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),a=n.n(r),i=n(526),o=n(3);const c=e=>{const{data:t,filename:n}=e;return Object(o.jsx)("div",{className:"card-header-actions",children:Object(o.jsx)(i.CSVLink,{data:t,filename:n,target:"_blank",children:Object(o.jsx)("small",{className:"text-muted",children:"export"})})})};var l=a.a.memo(c)},648:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(121),i=n(522),o=n.n(i),c=n(519),l=n(530),s=n(14),d=n(524),u=n(3);function f(e){let t,n=[Object(u.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"Select Award Type"},"")];for(t=0;t<e.length;t++){let r=e[t].type;n[t+1]=Object(u.jsx)("option",{value:r,children:r},r)}return n}function p(e){let t,n=[Object(u.jsx)("option",{value:"",disabled:!0,hidden:!0,children:"Select Position"},"")],r=e.positions.split(",");for(t=0;t<r.length;t++)n[t+1]=Object(u.jsx)("option",{value:r[t],children:r[t]},r[t]);return n}function h(e,t){let n,r=[];for(n=0;n<t.length;n++)t[n].committee===e.committee&&(delete t[n]._id,delete t[n].user,delete t[n].__v,r.push(t[n]));return r}function b(e,t){let n,r=[Object(u.jsx)("option",{value:"",hidden:!0,children:"Select Delegation"},"")];for(n=0;n<t.length;n++)if(e.division.includes(t[n].division)||t[n].division.includes(e.division)){let e=t[n].delegation;r.push(Object(u.jsx)("option",{value:e,children:e},e))}return r}var m=n(523);let j,y="",g=!0;t.default=e=>{let{match:{params:{committee:t}}}=e;const{user:n}=Object(a.b)(),{isAuthenticated:i}=Object(a.b)(),[O,v]=Object(r.useState)(!1),[w,x]=Object(r.useState)({type:"",position:"",delegation:"",delegate1:"",delegate2:""}),[k,C]=Object(r.useState)({awards:["",""],committee:[],registrationData:[],awardTypes:[],redirect:!1}),[S,_]=Object(r.useState)(["type","position","delegation",{key:"delegate1",label:"Delegate I"},"actions"]);return i&&async function(){await Object(d.a)("/api/get/individualAward",n.sub,"position").then((e=>{let t,n=[];for(t=0;t<e.length;t++)JSON.stringify(e[t].committee)===JSON.stringify(k.committee.committee)&&n.push(e[t]);JSON.stringify(n)!==JSON.stringify(k.awards)&&C((e=>({...e,awards:JSON.stringify(n)})))})),await Object(d.a)("/api/get/registrationData",n.sub).then((e=>{JSON.stringify(e)!==JSON.stringify(k.registrationData)&&C((t=>({...t,registrationData:e})))})),await Object(d.a)("/api/get/awardType",n.sub).then((e=>{JSON.stringify(e)!==JSON.stringify(k.awardTypes)&&C((t=>({...t,awardTypes:e})))})),await Object(d.a)("/api/get/committee",n.sub).then((e=>{let n;for(n=0;n<e.length;n++)if(e[n]._id===t){let t=e[n];JSON.stringify(t)!==JSON.stringify(k.committee)&&C((e=>({...e,committee:t})))}0===k.committee.length?C((e=>({...e,redirect:!0}))):"Double Delegation"===k.committee.type&&_(["type","position","delegation",{key:"delegate1",label:"Delegate I"},{key:"delegate2",label:"Delegate II"},"actions"])}))}(),0!==k.committee.length?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(c.S,{children:Object(u.jsx)(c.l,{children:Object(u.jsxs)(c.g,{children:[Object(u.jsxs)(c.k,{children:[k.committee.committee," - Individual Awards",Object(u.jsx)(l.a,{data:h(k.committee,k.awards),filename:k.committee.committee+" Awards.csv"})]}),Object(u.jsxs)(c.h,{children:[Object(u.jsx)(c.S,{className:"align-items-left",children:Object(u.jsx)(c.l,{lg:"3",children:Object(u.jsx)(c.f,{block:!0,color:"primary",onClick:()=>(x({type:"",position:"",delegation:"",delegate1:"",delegate2:""}),y="Add Award",g=!0,void v(!O)),children:"Add New"})})}),Object(u.jsx)("br",{}),Object(u.jsx)(c.p,{items:JSON.parse(k.awards),fields:S,hover:!0,striped:!0,sorter:!0,itemsPerPage:50,pagination:!0,scopedSlots:{actions:e=>Object(u.jsx)("td",{children:Object(u.jsxs)(c.q,{className:"m-1",children:[Object(u.jsx)(c.t,{color:"secondary",children:"Select Action"}),Object(u.jsxs)(c.s,{children:[Object(u.jsx)(c.r,{onClick:()=>function(e){x({type:e.type,position:e.position,delegation:e.delegation,delegate1:e.delegate1,delegate2:e.delegate2}),y="Edit Award",g=!1,j=e,v(!O)}(e),children:"Edit"}),Object(u.jsx)(c.r,{onClick:()=>function(e){Object(m.a)(n.sub).then((t=>{0===t?alert("No valid MUNWell License found! \nUpload a valid MUNWell License to be able to configure data."):o.a.delete("/api/delete/individualAward",{data:{id:e._id}}).then((()=>{alert(k.committee.committee+" "+w.type+" award deleted successfully!")})).catch((()=>{console.log("Internal server error")}))})),Object(d.a)("/api/get/individualAward",n.sub,"position").then((e=>{let n,r=[];for(n=0;n<e.length;n++)e[n]._id===t&&r.push(e[n]);C((e=>({...e,awards:JSON.stringify(r)})))}))}(e),children:"Delete"})]})]})})}})]})]})})}),Object(u.jsxs)(c.N,{show:O,onClose:v,size:"lg",children:[Object(u.jsx)(c.Q,{children:Object(u.jsx)(c.R,{children:y})}),Object(u.jsx)(c.O,{children:Object(u.jsxs)(c.w,{action:"",method:"post",encType:"multipart/form-data",className:"form-horizontal",children:[Object(u.jsxs)(c.x,{row:!0,children:[Object(u.jsx)(c.l,{md:"3",children:Object(u.jsx)(c.L,{htmlFor:"award-type",children:"Award Type"})}),Object(u.jsx)(c.l,{xs:"12",md:"8",children:Object(u.jsx)(c.T,{custom:!0,name:"awardType",value:w.type,onChange:e=>{const t=e.target.value;x((e=>({...e,type:t})))},children:f(k.awardTypes)})})]}),Object(u.jsxs)(c.x,{row:!0,children:[Object(u.jsx)(c.l,{md:"3",children:Object(u.jsx)(c.L,{htmlFor:"award-pos",children:"Position"})}),Object(u.jsx)(c.l,{xs:"12",md:"8",children:Object(u.jsx)(c.T,{custom:!0,name:"awardPos",value:w.position,onChange:e=>{const t=e.target.value;x((e=>({...e,position:t})))},children:p(k.committee)})})]}),Object(u.jsxs)(c.x,{row:!0,children:[Object(u.jsx)(c.l,{md:"3",children:Object(u.jsx)(c.L,{htmlFor:"award-delegation",children:"Delegation"})}),Object(u.jsx)(c.l,{xs:"12",md:"8",children:Object(u.jsx)(c.T,{custom:!0,name:"select",id:"award-delegation",value:w.delegation,onChange:e=>{const t=e.target.value;x((e=>({...e,delegation:t})))},children:b(k.committee,k.registrationData)})})]}),Object(u.jsxs)(c.x,{row:!0,children:[Object(u.jsx)(c.l,{md:"3",children:Object(u.jsx)(c.L,{htmlFor:"award-del1",children:"Delegate I Name"})}),Object(u.jsx)(c.l,{xs:"12",md:"8",children:Object(u.jsx)(c.E,{name:"awardDel1",placeholder:"Delegate I Name",value:w.delegate1,onChange:e=>{const t=e.target.value;x((e=>({...e,delegate1:t})))}})})]}),Object(u.jsxs)(c.x,{row:!0,hidden:!k.committee.type.includes("Double Delegation"),children:[Object(u.jsx)(c.l,{md:"3",children:Object(u.jsx)(c.L,{htmlFor:"award-del2",children:"Delegate II Name"})}),Object(u.jsx)(c.l,{xs:"12",md:"8",children:Object(u.jsx)(c.E,{name:"awardDel2",placeholder:"Delegate II Name",value:w.delegate2,onChange:e=>{const t=e.target.value;x((e=>({...e,delegate2:t})))}})})]})]})}),Object(u.jsxs)(c.P,{children:[Object(u.jsx)(c.f,{color:"secondary",onClick:()=>v(!1),children:"Cancel"}),Object(u.jsx)(c.f,{color:"primary",onClick:e=>function(e){e.preventDefault(),Object(m.a)(n.sub).then((e=>{if(0===e)alert("No valid MUNWell License found! \nUpload a valid MUNWell License to be able to configure data.");else{const e={user:n.sub,committee:k.committee.committee,type:w.type,position:w.position,delegation:w.delegation,delegate1:w.delegate1,delegate2:w.delegate2};g?o()({url:"/api/save/individualAward",method:"POST",data:e}).then((()=>{alert(k.committee.committee+" "+w.type+" award added successfully!")})).catch((()=>{console.log("Internal server error")})):o.a.put("/api/update/individualAward",{data:{id:j._id,update:e}}).then((()=>{alert(k.committee.committee+" "+w.type+" award updated successfully!")})).catch((()=>{console.log("Internal server error")}))}})),Object(d.a)("/api/get/individualAward",n.sub,"position").then((e=>{let n,r=[];for(n=0;n<e.length;n++)e[n]._id===t&&r.push(e[n]);C((e=>({...e,awards:JSON.stringify(r)})))})),v(!1)}(e),children:"Submit"})]})]})]}):k.redirect?Object(u.jsx)(s.a,{to:{pathname:"/404"}}):Object(u.jsx)("p",{children:"Waiting for Data..."})}}}]);
//# sourceMappingURL=13.d572fdd6.chunk.js.map